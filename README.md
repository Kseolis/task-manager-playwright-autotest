# Task Manager Playwright Autotests

**Production-ready test framework** –¥–ª—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Task Manager –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Staff SDET —É—Ä–æ–≤–Ω—è:
- ‚úÖ **Test Independence**: –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **Factory Pattern**: –≥–∏–±–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Test Pyramid**: 70% unit, 20% integration, 10% E2E
- ‚úÖ **Observability**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **Resilience**: retry –ª–æ–≥–∏–∫–∞, Circuit Breaker
- ‚úÖ **CI/CD**: Quality Gates, –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:

```bash
make install
```

- **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ (dev)**:

```bash
make run
```

- **–ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞**:

```bash
make lint
```

## –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤

Playwright-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–Ω–∏–º–∞–µ—Ç dev-—Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `webServer` (—Å–º. `playwright.config.js`), –ø–æ—ç—Ç–æ–º—É –æ—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å `npm run dev` –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ.

- **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ Makefile**:

```bash
make test
```

- **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ npm**:

```bash
npm test
```

- **–î–µ–±–∞–≥ —Ä–µ–∂–∏–º**:

```bash
npm run test:debug
```

- **UI —Ä–µ–∂–∏–º**:

```bash
npm run test:ui
```

- **–û—Ç–∫—Ä—ã—Ç—å HTML-—Ä–µ–ø–æ—Ä—Ç**:

```bash
npm run test:report
```

- **Unit-—Ç–µ—Å—Ç—ã** (Vitest):

```bash
npm run test:unit          # –ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤
npm run test:unit:watch    # Watch —Ä–µ–∂–∏–º
npm run test:unit:coverage # –° coverage –æ—Ç—á–µ—Ç–æ–º
```

- **–í—Å–µ —Ç–µ—Å—Ç—ã**:

```bash
npm run test:all           # Unit + E2E —Ç–µ—Å—Ç—ã
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç **Test Pyramid** –ø—Ä–∏–Ω—Ü–∏–ø—É:

```
     üìä E2E (10%) - –ø–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
   üîÑ Integration (20%) - API, workflows, contracts
  üü¢ Unit (70%) - —Ö–µ–ª–ø–µ—Ä—ã, —Ñ–∞–±—Ä–∏–∫–∏, —É—Ç–∏–ª–∏—Ç—ã
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

- **`tests/e2e/`** - E2E —Ç–µ—Å—Ç—ã (Playwright)
  - `smoke/` - –±—ã—Å—Ç—Ä—ã–µ smoke —Ç–µ—Å—Ç—ã (<30 —Å–µ–∫—É–Ω–¥)
- **`tests/integration/`** - Integration —Ç–µ—Å—Ç—ã
  - `api/` - API integration —Ç–µ—Å—Ç—ã
  - `workflows/` - Business workflow —Ç–µ—Å—Ç—ã
- **`tests/unit/`** - Unit —Ç–µ—Å—Ç—ã (Vitest)
  - `factories/` - —Ç–µ—Å—Ç—ã —Ñ–∞–±—Ä–∏–∫
  - `helpers/` - —Ç–µ—Å—Ç—ã —Ö–µ–ª–ø–µ—Ä–æ–≤
- **`tests/contracts/`** - Contract —Ç–µ—Å—Ç—ã
- **`tests/factories/`** - Factory Pattern –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- **`tests/helpers/`** - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **`tests/pages/`** - Page Object Model

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã

- **Page Object Model**: –∏–∑–æ–ª—è—Ü–∏—è UI –ª–æ–≥–∏–∫–∏
- **Factory Pattern**: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Test Data Registry**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- **API Client**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ API
- **Structured Logging**: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](docs/architecture.md).

## CI/CD (GitHub Actions)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º CI/CD pipeline:

### 1. CI Pipeline (`.github/workflows/ci.yml`)

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ push/PR –≤ `main` –∏–ª–∏ `develop`:
- **Lint**: ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
- **Unit Tests**: –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã —Ö–µ–ª–ø–µ—Ä–æ–≤
- **E2E Tests**: –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- **Quality Gates**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 2. Nightly Tests (`.github/workflows/nightly.yml`)

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00 UTC:
- –¢–µ—Å—Ç—ã –Ω–∞ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö (chromium, firefox, webkit)
- Matrix —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `workflow_dispatch`

### 3. Test Report (`.github/workflows/report.yml`)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø–æ—Å–ª–µ CI/Nightly —Ç–µ—Å—Ç–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub

–î–ª—è —Ä–∞–±–æ—Ç—ã CI/CD –¥–æ–±–∞–≤—å—Ç–µ –≤ Settings ‚Üí Secrets ‚Üí Actions:

- `BASE_URL` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- **BASE_URL**: –±–∞–∑–æ–≤—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `http://localhost:5173`)
- **EXPECT_TIMEOUT**: —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏–π `expect()` –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5000`)
- **CI**: –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤–∫–ª—é—á–∞–µ—Ç `forbidOnly`, `retries=2`, `workers=1` –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–ø–æ–∫–∞–∑ HTML-—Ä–µ–ø–æ—Ä—Ç–∞
- **LOG_LEVEL**: —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (0=DEBUG, 1=INFO, 2=WARN, 3=ERROR, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/architecture.md) - –æ–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é —Ç–µ—Å—Ç–æ–≤](docs/writing-tests.md) - –ø—Ä–∏–º–µ—Ä—ã –∏ best practices
- [Best Practices](docs/best-practices.md) - –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- [Troubleshooting](docs/troubleshooting.md) - —Ä–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º
- [ADR (Architecture Decision Records)](docs/adr/) - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- ‚úÖ **Test Independence**: 100% —Ç–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- ‚úÖ **Code Coverage**: ‚â•80% –¥–ª—è production –∫–æ–¥–∞ (—Ü–µ–ª—å)
- ‚úÖ **Test Execution Time**: <5 –º–∏–Ω—É—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ suite
- ‚úÖ **Flaky Tests**: 0% flaky —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **Fast Feedback**: Unit <100ms, Integration <1s, E2E <10s –∫–∞–∂–¥—ã–π
